class PushNotification

	require 'fcm'
	def self.send_notidication(device_keys, user, slat, slong, dlat, dlong)
    binding.pry
		fcm = FCM.new(ENV['fcm_key'])
		registration_ids= device_keys # Array of keys generated by firebase for devices
		options = {
		        priority: "high",
		        collapse_key: "updated_score",
		        notification: {
		            title: "SONAAC",
		            body: "#{user.full_name}, need a lift",
		            icon: "myicon",
                source_lat: slat,
                source_long: slong,
                destination_lat: dlat,
                destination_long: dlong
              }
		        }
            binding.pry
		response = fcm.send(registration_ids, options)
	end

  def self.send_user_notidication(device_keys, user)
    fcm = FCM.new(ENV['fcm_key']) # Find server_key on: your firebase console on web > tab general > web api key
    registration_ids= device_keys # Array of keys generated by firebase for devices
    options = {
            priority: "high",
            collapse_key: "updated_score",
            notification: {
                title: "SONAAC",
                body: "#{user.full_name}, need a lift",
                icon: "myicon"}
            }
    response = fcm.send(registration_ids, options)
  end

end
